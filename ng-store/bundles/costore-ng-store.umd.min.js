!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs/internal/BehaviorSubject"),require("rxjs/internal/operators/distinctUntilChanged"),require("rxjs/internal/operators/pluck")):"function"==typeof define&&define.amd?define("@costore/ng-store",["exports","@angular/core","rxjs/internal/BehaviorSubject","rxjs/internal/operators/distinctUntilChanged","rxjs/internal/operators/pluck"],e):e(((t=t||self).costore=t.costore||{},t.costore["ng-store"]={}),t.ng.core,t.rxjs["internal/BehaviorSubject"],t.rxjs["internal/operators/distinctUntilChanged"],t.rxjs["internal/operators/pluck"])}(this,(function(t,e,r,n,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var i=function(){return(i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function a(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}var s=new e.InjectionToken("STORE_TOKEN"),c=function(){function t(t){var e=this;this.config=t,this._state={},this._actions={},this.config.forEach((function(t){var r=t.name,n=t.actions,o=t.plugins;o&&o.forEach((function(t){return t(r,n)})),e._actions[r]=n,n.has("@INIT")&&e.dispatch(r,"@INIT")}))}return Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),t.prototype.dispatch=function(t,e,r){var n,o=this._actions[t].get(e)(this.state[t],r),a=this.state,u=t,s=(a[u],function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}(a,["symbol"==typeof u?u:u+""]));this._state="@DESTROY"!==e?i({},s,((n={})[t]=o,n)):i({},s)},t}();var f=function(){function t(e){this.config=e,t._store=new c(this.config),t._stateSubject=new r.BehaviorSubject(t._store.state)}return t.use=function(t){var e=this;return{observable:this._stateSubject.pipe(o.pluck(t),n.distinctUntilChanged()),dispatch:function(r,n){e._store.dispatch(t,r,n),e._stateSubject.next(e._store.state)},getValue:function(){return e._stateSubject.value[t]}}},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:Array,decorators:[{type:e.Inject,args:[s]}]}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(s))},token:t,providedIn:"root"}),t}();t.STORE_TOKEN=s,t.StoreService=f,t.UseState=function(t){return function(e,r){var n;Object.defineProperties(e,((n={})[r]={get:function(){return f.use(t)}},n))}},t.keeper=function(){return function(t,e){var r=JSON.parse(localStorage.getItem(t));return e.set("@LOAD",(function(){return r})),r&&e.set("@INIT",(function(){return e.get("@LOAD")(null)})),e.forEach((function(r,n){"@INIT"!==n&&e.set(n,(function(e,n){var o=r(e,n);return localStorage.setItem(t,JSON.stringify(o)),o}))})),e}},t.logger=function(){return function(t,e){return e.forEach((function(r,n){e.set(n,(function(e,o){var i=r(e,o);return function(t,e,r){console.log("%c["+t+"] %c"+e,"color: #070","color: #070; font-weight: 700",r)}(t,n,i),i}))})),e}},t.undoable=function(t){return function(t,e){return e.forEach((function(t,r){e.set(r,(function(e,r){e||(e={past:[],present:null,future:[]});var n=t(e.present,r);return{past:u(e.past,[e.present]),present:n,future:[]}}))})),e.set("@UNDO",(function(t){var e=t.past,r=t.present,n=t.future;if(!e.length)return{past:e,present:r,future:n};var o=e[e.length-1];return{past:e.slice(0,e.length-1),present:o,future:u([r],n)}})),e.set("@REDO",(function(t){var e=t.past,r=t.present,n=t.future;if(!n.length)return{past:e,present:r,future:n};var o=n[0],i=n.slice(1);return{past:u(e,[r]),present:o,future:i}})),e}},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=costore-ng-store.umd.min.js.map